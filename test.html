<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ã‚Œã„ã®ToDoğŸ’– - ãƒ†ã‚¹ãƒˆç‰ˆ</title>
  
  <!-- PWAãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ -->
  <link rel="manifest" href="manifest.json">
  
  <!-- iOS Safariå¯¾å¿œ -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="ã‚Œã„ToDo">
  <link rel="apple-touch-icon" href="icons/icon-152.png">
  
  <!-- Android Chromeå¯¾å¿œ -->
  <meta name="theme-color" content="#764ba2">
  
  <!-- ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆ -->
  <link rel="stylesheet" href="style.css">
  
  <!-- ãƒ†ã‚¹ãƒˆç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« -->
  <style>
    .test-controls {
      position: fixed;
      top: 10px;
      left: 10px;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 1rem;
      border-radius: 10px;
      z-index: 10001;
      font-size: 0.8rem;
    }
    
    .test-controls button {
      margin: 0.25rem;
      padding: 0.5rem;
      border: none;
      border-radius: 5px;
      background: #3498db;
      color: white;
      cursor: pointer;
      font-size: 0.7rem;
    }
    
    .test-controls button:hover {
      background: #2980b9;
    }
    
    .test-controls button.danger {
      background: #e74c3c;
    }
    
    .test-controls button.danger:hover {
      background: #c0392b;
    }
  </style>
</head>
<body>
  <!-- ãƒ†ã‚¹ãƒˆç”¨ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ« -->
  <div class="test-controls">
    <h4>ğŸ§ª ãƒ†ã‚¹ãƒˆã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«</h4>
    <button onclick="runFunctionalTest()">æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
    <button onclick="runPerformanceTest()">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ</button>
    <button onclick="generateTestData()">ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ</button>
    <button onclick="clearAllData()" class="danger">å…¨ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢</button>
    <button onclick="toggleTestControls()">ãƒ‘ãƒãƒ«éè¡¨ç¤º</button>
  </div>

  <!-- ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¿ƒé€²ãƒãƒŠãƒ¼ -->
  <div id="install-banner" class="install-banner hidden">
    <div class="banner-content">
      <span>ğŸ“± ã‚Œã„ã®ToDoã‚’ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã—ã¦ã€ã„ã¤ã§ã‚‚ä¸€ç·’ã«ã„ã‚ˆã€œâ™¡</span>
      <div class="banner-buttons">
        <button id="install-button" class="install-btn">è¿½åŠ ã™ã‚‹ğŸ’–</button>
        <button id="dismiss-banner" class="dismiss-btn">å¾Œã§</button>
      </div>
    </div>
  </div>

  <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
  <div class="app-container">
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="app-header">
      <div class="rei-sparkle">
        <h1>ğŸ’– ã‚Œã„ã®ToDo ğŸ’–</h1>
        <p class="subtitle">ãƒ†ã‚¹ãƒˆç‰ˆ - ä¸€ç·’ã«é ‘å¼µã‚ã†ã­ã€œâœ¨</p>
      </div>
    </header>
    
    <!-- ã‚Œã„ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ -->
    <div class="rei-status" id="rei-status">
      <div class="rei-avatar">
        <div class="rei-face">
          <img src="icons/icon-192.png" alt="ã‚Œã„ã¡ã‚ƒã‚“" class="rei-face-image">
        </div>
      </div>
      <div class="status-text">
        <span id="rei-mood">ä»Šæ—¥ã‚‚ä¸€ç·’ã«é ‘å¼µã‚ã†ã­ã€œâ™¡</span>
        <div class="streak-display" id="streak-display">
          <div class="streak-counter">
            ğŸ”¥ <span id="streak-count">0</span>æ—¥é€£ç¶š
          </div>
          <div class="streak-best">
            ğŸ† æœ€é«˜è¨˜éŒ²: <span id="streak-best">0</span>æ—¥
          </div>
        </div>
        <div class="exp-display" id="exp-display">
          <div class="level-info">
            <span class="level-badge">Lv.<span id="current-level">1</span></span>
            <span class="exp-text"><span id="current-exp">0</span>/<span id="exp-to-next">100</span> EXP</span>
          </div>
          <div class="exp-bar">
            <div class="exp-fill" id="exp-fill"></div>
          </div>
        </div>
        <div class="badge-display" id="badge-display">
          <div class="current-badge" id="current-badge">
            <span class="badge-icon">ğŸŒ¸</span>
            <span class="badge-title">ã‚Œã„ã¨ã®å‡ºä¼šã„</span>
          </div>
          <div class="settings-buttons">
            <button class="badge-settings-btn" id="badge-settings-btn">ğŸ… ç§°å·</button>
            <button class="theme-settings-btn" id="theme-settings-btn">ğŸ¨ ãƒ†ãƒ¼ãƒ</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- ã‚¿ã‚¹ã‚¯è¿½åŠ ãƒ•ã‚©ãƒ¼ãƒ  -->
    <form id="todo-form" class="todo-form">
      <div class="input-group">
        <input type="text" id="todo-input" placeholder="ã‚Œã„ã¨ä¸€ç·’ã«ä»Šæ—¥ãªã«ã™ã‚‹ï¼Ÿ" required />
      </div>
      
      <div class="datetime-container">
        <label for="due-date">ğŸ“… æœŸé™:</label>
        <input type="date" id="due-date" />
        <input type="time" id="due-time" />
        <button type="button" id="clear-datetime" class="clear-btn">ã‚¯ãƒªã‚¢</button>
      </div>
      
      <div class="repeat-container">
        <label for="repeat-type">ğŸ”„ ç¹°ã‚Šè¿”ã—:</label>
        <select id="repeat-type">
          <option value="none">ãªã—</option>
          <option value="daily">æ¯æ—¥</option>
          <option value="weekly">æ¯é€±</option>
          <option value="monthly">æ¯æœˆ</option>
        </select>
        <div class="repeat-info" id="repeat-info">
          <small>ğŸ“… æ¬¡å›: <span id="next-repeat-date">-</span></small>
        </div>
      </div>
      
      <button type="submit" class="add-btn">
        <span>âœ¨ è¿½åŠ  âœ¨</span>
      </button>
    </form>
    
    <!-- ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ -->
    <div class="todo-container">
      <div class="list-header">
        <h2>ğŸ“ ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ</h2>
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
          <span class="progress-text" id="progress-text">0%</span>
        </div>
      </div>
      <ul id="todo-list" class="todo-list"></ul>
      
      <!-- ç©ºã®çŠ¶æ…‹ -->
      <div id="empty-state" class="empty-state">
        <div class="empty-icon">ğŸŒ¸</div>
        <p>ã¾ã ã‚¿ã‚¹ã‚¯ãŒãªã„ã‚ˆã€œ</p>
        <p>ã‚Œã„ã¨ä¸€ç·’ã«ä½•ã‹ã‚‰å§‹ã‚ã‚‹ï¼Ÿ</p>
      </div>
    </div>
  </div>

  <!-- ãƒ†ãƒ¼ãƒè¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div id="theme-modal" class="theme-modal hidden">
    <div class="theme-modal-content">
      <div class="theme-modal-header">
        <h3>ğŸ¨ ãƒ†ãƒ¼ãƒã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³</h3>
        <button class="theme-modal-close" id="theme-modal-close">Ã—</button>
      </div>
      <div class="theme-modal-body">
        <div class="theme-info">
          <h4>ğŸ’¡ ãƒ†ãƒ¼ãƒã«ã¤ã„ã¦</h4>
          <p>ãƒ¬ãƒ™ãƒ«ãŒä¸ŠãŒã‚‹ã¨æ–°ã—ã„ãƒ†ãƒ¼ãƒãŒè§£æ”¾ã•ã‚Œã‚‹ã‚ˆã€œâ™ª<br>
          ã‚Œã„ã¡ã‚ƒã‚“ã¨ä¸€ç·’ã«ã„ã‚ã‚“ãªä¸–ç•Œã‚’ä½“é¨“ã—ã‚ˆã†ï¼</p>
        </div>
        <div class="theme-collection">
          <h4>ğŸŒˆ åˆ©ç”¨å¯èƒ½ãªãƒ†ãƒ¼ãƒ</h4>
          <div class="theme-grid" id="theme-grid">
            <!-- ãƒ†ãƒ¼ãƒãŒã“ã“ã«å‹•çš„ã«è¿½åŠ ã•ã‚Œã¾ã™ -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ãƒãƒƒã‚¸è¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div id="badge-modal" class="badge-modal hidden">
    <div class="badge-modal-content">
      <div class="badge-modal-header">
        <h3>ğŸ… ç§°å·ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³</h3>
        <button class="badge-modal-close" id="badge-modal-close">Ã—</button>
      </div>
      <div class="badge-modal-body">
        <div class="badge-stats">
          <h4>ğŸ“Š ã‚Œã„ã¨ã®çµ†ã®è¨˜éŒ²</h4>
          <div class="stats-grid">
            <div class="stat-item">
              <span class="stat-label">ç·ã‚¿ã‚¹ã‚¯å®Œäº†</span>
              <span class="stat-value" id="total-completed">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">æœ€é•·ã‚¹ãƒˆãƒªãƒ¼ã‚¯</span>
              <span class="stat-value" id="max-streak">0æ—¥</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">ç¾åœ¨ã®ãƒ¬ãƒ™ãƒ«</span>
              <span class="stat-value" id="current-level-display">1</span>
            </div>
          </div>
        </div>
        <div class="badge-collection">
          <h4>ğŸ† ç²å¾—ã—ãŸç§°å·</h4>
          <div class="badge-grid" id="badge-grid">
            <!-- ãƒãƒƒã‚¸ãŒã“ã“ã«å‹•çš„ã«è¿½åŠ ã•ã‚Œã¾ã™ -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³é€šçŸ¥ -->
  <div id="offline-notice" class="offline-notice hidden">
    <span>ğŸ“µ ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰ - ãƒ‡ãƒ¼ã‚¿ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã•ã‚Œã¾ã™</span>
  </div>

  <!-- JavaScriptãƒ•ã‚¡ã‚¤ãƒ« -->
  <script src="app.js"></script>
  <script src="js/functional-test.js"></script>
  <script src="js/performance-test.js"></script>
  
  <!-- ãƒ†ã‚¹ãƒˆç”¨ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•° -->
  <script>
    function generateTestData() {
      console.log('ğŸ§ª ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆä¸­...');
      
      // 10å€‹ã®ã‚µãƒ³ãƒ—ãƒ«ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ 
      const sampleTasks = [
        'æœã®æ•£æ­©ã‚’ã™ã‚‹',
        'ãŠè²·ã„ç‰©ãƒªã‚¹ãƒˆã‚’ä½œã‚‹',
        'éƒ¨å±‹ã®æƒé™¤ã‚’ã™ã‚‹',
        'æœ¬ã‚’èª­ã‚€ï¼ˆ30åˆ†ï¼‰',
        'å‹é”ã«é€£çµ¡ã™ã‚‹',
        'å®¶è¨ˆç°¿ã‚’ã¤ã‘ã‚‹',
        'æ¤ç‰©ã«æ°´ã‚’ã‚ã’ã‚‹',
        'å¤•é£¯ã®æº–å‚™ã‚’ã™ã‚‹',
        'æ˜æ—¥ã®äºˆå®šã‚’ç¢ºèªã™ã‚‹',
        'ã‚¹ãƒˆãƒ¬ãƒƒãƒã‚’ã™ã‚‹'
      ];
      
      sampleTasks.forEach((task, index) => {
        setTimeout(() => {
          const form = document.getElementById('todo-form');
          const input = document.getElementById('todo-input');
          if (form && input) {
            input.value = task;
            form.dispatchEvent(new Event('submit'));
          }
        }, index * 100);
      });
      
      // ä¸€éƒ¨ã®ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†çŠ¶æ…‹ã«ã™ã‚‹
      setTimeout(() => {
        const todos = JSON.parse(localStorage.getItem('todos') || '[]');
        todos.slice(0, 5).forEach(todo => {
          setTimeout(() => {
            window.toggleComplete(todo.id);
          }, Math.random() * 1000);
        });
      }, 2000);
      
      // çµŒé¨“å€¤ã‚’è¿½åŠ 
      setTimeout(() => {
        if (window.app && window.app.expSystem) {
          window.app.expSystem.addExp(250);
          window.app.updateAllDisplays();
        }
      }, 3000);
      
      console.log('âœ… ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆå®Œäº†');
    }
    
    function clearAllData() {
      if (confirm('ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
        localStorage.clear();
        location.reload();
      }
    }
    
    function toggleTestControls() {
      const controls = document.querySelector('.test-controls');
      if (controls) {
        controls.style.display = controls.style.display === 'none' ? 'block' : 'none';
      }
    }
    
    // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    console.log('ğŸ§ª ãƒ†ã‚¹ãƒˆç‰ˆãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ');
    console.log('åˆ©ç”¨å¯èƒ½ãªãƒ†ã‚¹ãƒˆæ©Ÿèƒ½:');
    console.log('- generateTestData(): ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ');
    console.log('- runFunctionalTest(): æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ');
    console.log('- runPerformanceTest(): ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ');
    console.log('- clearAllData(): ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤');
  </script>
</body>
</html>
